
<!-- Article main list -->
<div class="grid grid-cols-2">
    <div>
        <!-- Search Filter -->
        <div class="relative text-gray-600 focus-within:text-gray-400">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-white">
                <fa-icon [icon]="faSearch"></fa-icon>
            </span>
            <input [(ngModel)]="searchTerm" type="search" name="q" class="py-2 text-sm bg-transparent text-white rounded-md pl-10 focus:outline-none focus:text-white w-full" placeholder="Procurar por Nome/Palavra" autocomplete="off">
        </div>
        <i class="fab fa-solid fa-magnifying-glass text-white"></i>
    </div>
    <div class="ml-5 relative w-full" *ngIf="categories$ | async as categories">
        <!-- Category -->
        <div>
            <button (click)="toggleDropdown()" id="dropdownDefaultButton" data-dropdown-toggle="dropdown" class="text-sm text-white border border-gray-300 hover:border-white px-6 py-2 rounded w-full">
                Categorias <fa-icon [icon]="faCaretDown" class="ml-2"></fa-icon>
            </button>
        </div>

        <div [ngClass]="{ 'hidden': !isDropdownOpen }" id="dropdown" class="absolute inline bg-white border border-gray-300 py-1 shadow-md rounded-md w-48">
            <ng-container *ngFor="let category of categories">
                <a class="block text-sm text-gray-500 w-full px-3 py-1 bg-white hover:bg-gray-100" (click)="selectCategory(category.description)">{{ category.description }}</a>
            </ng-container>
        </div>
    </div>
</div>

<!-- 
<div class="container" *ngIf="categories$ | async as categories">
    <ng-container *ngFor="let category of categories">
        <a href="#" class="block text-sm text-gray-500 w-full px-3 py-1 bg-white hover:bg-gray-100">{{ category.description }}</a>
    </ng-container>
</div> -->


<div class="container">
    <div class="my-5">
        <div *ngIf="filteredArticles$ | async as articles" class="flex flex-wrap">
            <ng-container *ngFor="let article of articles">
                <div class="py-5 text-cent w-1/2 flex" *ngIf="article.title.toLowerCase().includes(searchTerm.toLowerCase())">
                    <div class="card-header w-1/4">
                        <a [routerLink]="['/noticias', article.urlHandle]"><img [src]="article.hero" class="w-full mx-auto object-contain" [alt]="article.title"></a>
                    </div>
                    <div class="card-body mt-2 ml-4 w-1/3">
                        <h5 class="text-white">
                            {{ article.title }}
                        </h5>
                        <p class="text-white" *ngIf="article.categories">
                            <span *ngFor="let category of article.categories">
                            {{ category.description }}
                            </span>
                        </p>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>